(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{42:function(e,n,t){"use strict";t.r(n);var c=t(1),a=t.n(c),r=t(17),o=t.n(r),s=(t(8),t(7)),u=t(3),i=t(4),d=t.n(i),l="/api/persons",j={getPersons:function(){return d.a.get(l).then((function(e){return e.data}))},createPerson:function(e){return d.a.post(l,e).then((function(e){return e.data}))},deletePerson:function(e){return d.a.delete("".concat(l,"/").concat(e)).then((function(e){return e.data}))},updatePerson:function(e){return d.a.put("".concat(l,"/").concat(e.id),e).then((function(e){return e.data}))}},b=t(0),f=function(e){var n=e.persons,t=e.onDeleteClick;return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:"Numbers"}),n.map((function(e){return Object(b.jsxs)("p",{children:[e.name," ",e.number," ",Object(b.jsx)("button",{onClick:t,"data-id":e.id,"data-name":e.name,children:"Delete"})]},e.name)}))]})},m=function(e){var n=e.message,t=e.type;return n?Object(b.jsx)("div",{className:"success"===t?"successMessage":"errorMessage",children:n}):null},h=function(e){var n=e.filterTerm,t=e.onChange;return Object(b.jsxs)("div",{children:["filter shown with ",Object(b.jsx)("input",{value:n,onChange:t})]})},p=function(e){var n=e.newName,t=e.newNumber,c=e.onChangeName,a=e.onChangeNumber,r=e.onClickAdd;return Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{children:"add a new "}),Object(b.jsxs)("form",{children:[Object(b.jsxs)("div",{children:["name: ",Object(b.jsx)("input",{value:n,onChange:c})]}),Object(b.jsxs)("div",{children:["number: ",Object(b.jsx)("input",{value:t,onChange:a})]}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{type:"submit",onClick:r,children:"add"})})]})]})},O=function(){var e=Object(c.useState)([]),n=Object(u.a)(e,2),t=n[0],a=n[1],r=Object(c.useState)(""),o=Object(u.a)(r,2),i=o[0],d=o[1],l=Object(c.useState)(""),O=Object(u.a)(l,2),g=O[0],v=O[1],x=Object(c.useState)(""),C=Object(u.a)(x,2),w=C[0],y=C[1],P=Object(c.useState)({message:null,type:null}),k=Object(u.a)(P,2),N=k[0],S=k[1];Object(c.useEffect)((function(){j.getPersons().then((function(e){a(e)})).catch((function(e){console.error(e)}))}),[]);var D=t.filter((function(e){return e.name.toLowerCase().includes(w.toLowerCase())})),T=function(e){S(e),setTimeout((function(){S({message:null,type:null})}),4e3)};return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:"Phonebook"}),Object(b.jsx)(m,{message:N.message,type:N.type}),Object(b.jsx)(h,{filterTerm:w,onChange:function(e){y(e.target.value)}}),Object(b.jsx)(p,{newName:i,newNumber:g,onChangeName:function(e){d(e.target.value)},onChangeNumber:function(e){v(e.target.value)},onClickAdd:function(e){if(e.preventDefault(),t.some((function(e){return e.name===i}))){if(window.confirm("".concat(i," is already added to phonebook, replace the old number with a new one?"))){var n=t.find((function(e){return e.name===i})),c=Object(s.a)(Object(s.a)({},n),{},{number:g});j.updatePerson(c).then((function(e){a(t.map((function(e){return e.id!==c.id?e:c}))),T({message:"Updated ".concat(c.name,"'s number"),type:"success"})})).catch((function(e){T({message:"Update Operation failed: ".concat(c.name," was already removed"),type:"error"})}))}}else{var r={name:i,number:g};j.createPerson(r).then((function(e){a(t.concat(e)),T({message:"Added ".concat(e.name),type:"success"})})).catch((function(e){T({message:e.response.data.error,type:"error"})}))}d(""),v("")}}),Object(b.jsx)(f,{persons:D,onDeleteClick:function(e){var n=e.target.dataset.id;window.confirm("Delete ".concat(e.target.dataset.name,"?"))&&j.deletePerson(n).then((function(){var c=t.filter((function(e){return e.id!==n}));T({message:"Removed ".concat(e.target.dataset.name),type:"success"}),a(c)})).catch((function(e){T({message:"Error: ".concat(e),type:"error"})}))}})]})},g=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,43)).then((function(n){var t=n.getCLS,c=n.getFID,a=n.getFCP,r=n.getLCP,o=n.getTTFB;t(e),c(e),a(e),r(e),o(e)}))};o.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(O,{})}),document.getElementById("root")),g()},8:function(e,n,t){}},[[42,1,2]]]);
//# sourceMappingURL=main.c9fd7f74.chunk.js.map