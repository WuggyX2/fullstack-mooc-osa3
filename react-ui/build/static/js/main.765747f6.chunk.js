(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{42:function(e,n,t){"use strict";t.r(n);var a=t(1),c=t.n(a),r=t(17),s=t.n(r),o=(t(8),t(7)),i=t(3),u=t(4),d=t.n(u),l="/api/persons",j={getPersons:function(){return d.a.get(l).then((function(e){return e.data}))},createPerson:function(e){return d.a.post(l,e).then((function(e){return e.data}))},deletePerson:function(e){return d.a.delete("".concat(l,"/").concat(e)).then((function(e){return e.data}))},updatePerson:function(e){return d.a.put("".concat(l,"/").concat(e.id),e).then((function(e){return e.data}))}},m=t(0),f=function(e){var n=e.persons,t=e.onDeleteClick;return Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{children:"Numbers"}),n.map((function(e){return Object(m.jsxs)("p",{children:[e.name," ",e.number," ",Object(m.jsx)("button",{onClick:t,"data-id":e.id,"data-name":e.name,children:"Delete"})]},e.name)}))]})},b=function(e){var n=e.message,t=e.type;return n?Object(m.jsx)("div",{className:"success"===t?"successMessage":"errorMessage",children:n}):null},h=function(e){var n=e.filterTerm,t=e.onChange;return Object(m.jsxs)("div",{children:["filter shown with ",Object(m.jsx)("input",{value:n,onChange:t})]})},p=function(e){var n=e.newName,t=e.newNumber,a=e.onChangeName,c=e.onChangeNumber,r=e.onClickAdd;return Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{children:"add a new "}),Object(m.jsxs)("form",{children:[Object(m.jsxs)("div",{children:["name: ",Object(m.jsx)("input",{value:n,onChange:a})]}),Object(m.jsxs)("div",{children:["number: ",Object(m.jsx)("input",{value:t,onChange:c})]}),Object(m.jsx)("div",{children:Object(m.jsx)("button",{type:"submit",onClick:r,children:"add"})})]})]})},O=function(){var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],c=n[1],r=Object(a.useState)(""),s=Object(i.a)(r,2),u=s[0],d=s[1],l=Object(a.useState)(""),O=Object(i.a)(l,2),g=O[0],v=O[1],x=Object(a.useState)(""),C=Object(i.a)(x,2),w=C[0],y=C[1],P=Object(a.useState)({message:null,type:null}),k=Object(i.a)(P,2),N=k[0],D=k[1];Object(a.useEffect)((function(){j.getPersons().then((function(e){c(e)})).catch((function(e){console.error(e)}))}),[]);var S=t.filter((function(e){return e.name.toLowerCase().includes(w.toLowerCase())})),T=function(e){D(e),setTimeout((function(){D({message:null,type:null})}),4e3)};return Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{children:"Phonebook"}),Object(m.jsx)(b,{message:N.message,type:N.type}),Object(m.jsx)(h,{filterTerm:w,onChange:function(e){y(e.target.value)}}),Object(m.jsx)(p,{newName:u,newNumber:g,onChangeName:function(e){d(e.target.value)},onChangeNumber:function(e){v(e.target.value)},onClickAdd:function(e){if(e.preventDefault(),t.some((function(e){return e.name===u}))){if(window.confirm("".concat(u," is already added to phonebook, replace the old number with a new one?"))){var n=t.find((function(e){return e.name===u})),a=Object(o.a)(Object(o.a)({},n),{},{number:g});j.updatePerson(a).then((function(e){c(t.map((function(e){return e.id!==a.id?e:a}))),T({message:"Updated ".concat(a.name,"'s number"),type:"success"})})).catch((function(e){T({message:"Update Operation failed: ".concat(a.name," was already removed"),type:"error"})}))}}else{var r={name:u,number:g};j.createPerson(r).then((function(e){c(t.concat(e)),T({message:"Added ".concat(e.name),type:"success"})})).catch((function(e){T({message:"Add Operation failed: ".concat(e.message),type:"error"})}))}d(""),v("")}}),Object(m.jsx)(f,{persons:S,onDeleteClick:function(e){var n=parseInt(e.target.dataset.id);window.confirm("Delete ".concat(e.target.dataset.name,"?"))&&j.deletePerson(n).then((function(){var a=t.filter((function(e){return e.id!==n}));T({message:"Removed ".concat(e.target.dataset.name),type:"success"}),c(a)})).catch((function(n){T({message:"Delete Operation failed: ".concat(e.target.dataset.name," was already removed"),type:"error"})}))}})]})},g=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,43)).then((function(n){var t=n.getCLS,a=n.getFID,c=n.getFCP,r=n.getLCP,s=n.getTTFB;t(e),a(e),c(e),r(e),s(e)}))};s.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(O,{})}),document.getElementById("root")),g()},8:function(e,n,t){}},[[42,1,2]]]);
//# sourceMappingURL=main.765747f6.chunk.js.map